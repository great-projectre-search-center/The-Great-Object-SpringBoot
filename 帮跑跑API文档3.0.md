

# 创建或修改订单：帮跑跑API文档

## 用户管理

### 1.用户注册

|       URI        |                           /signup                            |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |                           用户注册                           |
|     请求方式     |                             POST                             |
| 传入 api 的参数  | JSONObject requestjson 带有nickname，password，repeatpassword的json |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

### 2.微信用户授权登录

|       URI        |                        /auth/wxlogin                         |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |                       微信用户授权登录                       |
|     请求方式     |                             POST                             |
| 传入 api 的参数  | WxAuthenticationToken wxAuthenticationToken 微信用户的登录凭证 |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

### 3.用户名和密码登录

|       URI        |                     /restlogin                      |
| :--------------: | :-------------------------------------------------: |
|     作用描述     |                  用户名和密码登录                   |
|     请求方式     |                        POST                         |
| 传入 api 的参数  | JSONObject requestjson 带有nickname，password的Json |
|   返回数据格式   |                       Json、                        |
| 返回数据格式样例 |                                                     |

### 4.加载用户信息

|       URI        |                    /auth/uploadWxUserinfo                    |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |                         加载用户信息                         |
|     请求方式     |                             POST                             |
| 传入 api 的参数  | JSONObject userinfo 带有用户信息的json, WxAuthenticationToken wxAuthenticationToken 微信用户的登录凭证 |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

###5.加载头像信息

|       URI        |                      /auth/uploadAvatar                      |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |                         加载头像信息                         |
|     请求方式     |                             POST                             |
| 传入 api 的参数  | WxAuthenticationToken wxAuthenticationToken 微信用户的登录凭证, MultipartFile file 头像文件路径 |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

### 6.获取用户信息

|       URI        |                         /getuserinfo                         |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |                         获取用户信息                         |
|     请求方式     |                             GET                              |
| 传入 api 的参数  | WxAuthenticationToken wxAuthenticationToken 微信用户的登录凭证 |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

###7.更改头像

|       URI        |                          /setavatar                          |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |                           更改头像                           |
|     请求方式     |                             POST                             |
| 传入 api 的参数  | ServletRequest request, WxAuthenticationToken wxAuthenticationToken, @RequestParam("file") MultipartFile[] multipartFile, ServletRequest servletRequest |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |







## 地址管理:

###1.添加新的收货地址

|       URI        |                       /address/addNew                        |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |     点击保存按钮后，新增用户想要新添加的一条收货地址数据     |
|     请求方式     |                             POST                             |
| 传入 api 的参数  | Address address 地址数据，Integer uid 用户id，String username 用户名 |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

### 2.删除收货地址

|       URI        |                    /address/{aid}/delete                     |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |  点击地址管理某条地址的删除按钮后，删除改该用户的此地址数据  |
|     请求方式     |                            DELETE                            |
| 传入 api 的参数  | Integer aid 地址id，Integer uid 用户id，String username 用户名 |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

###3.更新/修改地址

|       URI        |                    /address/{aid}/update                     |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     | 用户重新编辑某条已经存在的地址数据后，点保存按钮后，修改用户的某条地址数据 |
|     请求方式     |                             POST                             |
| 传入 api 的参数  | Integer aid 地址id，Integer uid 用户id，String username 用户名，Address address 修改后的地址 |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

### 4.获取全部地址

|       URI        |                           /address                           |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     | 某用户进入地址管理页面后，应该能够看到属于自己的所有地址数据 |
|     请求方式     |                             GET                              |
| 传入 api 的参数  |                      Integer uid 用户名                      |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

###5.根据aid获取地址

|       URI        |                             null                             |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     | 一条地址数据在多个页面需要出现，就可通过传递该地址的id，将id传入后端查表即可 |
|     请求方式     |                             GET                              |
| 传入 api 的参数  |                      Integer aid 地址id                      |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |





## 订单管理:

###1.创建或修改订单

|       URI        |     /order/edit      |
| :--------------: | :------------------: |
|     作用描述     | 用户创建新的订单数据 |
|     请求方式     |         POST         |
| 传入 api 的参数  |   Order order 订单   |
|   返回数据格式   |         Json         |
| 返回数据格式样例 |                      |

### 2.删除订单

|       URI        |                 /order/delete                  |
| :--------------: | :--------------------------------------------: |
|     作用描述     |                删除对应订单数据                |
|     请求方式     |                     DELETE                     |
| 传入 api 的参数  | JSONObject jsonObject（带有orderId的JSON对象） |
|   返回数据格式   |                      Json                      |
| 返回数据格式样例 |                                                |

### 3.取消订单

|       URI        |                 /order/cancel                  |
| :--------------: | :--------------------------------------------: |
|     作用描述     |            将订单数据修改为取消状态            |
|     请求方式     |                      POST                      |
| 传入 api 的参数  | JSONObject jsonObject（带有orderId的JSON对象） |
|   返回数据格式   |              Json（带有通知数据）              |
| 返回数据格式样例 |                                                |

### 4.修改状态为已接单

|       URI        |                  /order/accept                  |
| :--------------: | :---------------------------------------------: |
|     作用描述     |           将订单数据修改为已接单状态            |
|     请求方式     |                      POST                       |
| 传入 api 的参数  | Long orderId 订单id，String accepterId 接单人id |
|   返回数据格式   |              Json（ 包含通知数据）              |
| 返回数据格式样例 |                                                 |

### 5.修改状态为送货中

|       URI        |                 /order/deliver                 |
| :--------------: | :--------------------------------------------: |
|     作用描述     |           将订单数据修改为送货中状态           |
|     请求方式     |                      POST                      |
| 传入 api 的参数  | JSONObject jsonObject（带有orderId的JSON对象） |
|   返回数据格式   |             Json（ 包含通知数据）              |
| 返回数据格式样例 |                                                |

### 6.修改状态为已接收

|       URI        |                 /order/receive                 |
| :--------------: | :--------------------------------------------: |
|     作用描述     |           将订单数据修改为已接收状态           |
|     请求方式     |                      POST                      |
| 传入 api 的参数  | JSONObject jsonObject（带有orderId的JSON对象） |
|   返回数据格式   |             Json（ 包含通知数据）              |
| 返回数据格式样例 |                                                |

### 7.根据id查询订单信息

|       URI        |   /order/list/{id}   |
| :--------------: | :------------------: |
|     作用描述     | 查出对应id的订单信息 |
|     请求方式     |         GET          |
| 传入 api 的参数  |    Long id 订单id    |
|   返回数据格式   |         Json         |
| 返回数据格式样例 |                      |

### 8.根据订单类型分页查询全部订单信息

|       URI        |                     /order/list_catalog                      |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |               根据订单类型分页查询全部订单信息               |
|     请求方式     |                             GET                              |
| 传入 api 的参数  | String catalog 分类，String orderBy 排序，int pageIndex 分页的页号，int pageSize 分页的size |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

###9.根据订单状态和用户的openid分页查询全部订单信息

|       URI        |                     /order/list_idstatus                     |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |        根据订单状态和用户的openid分页查询全部订单信息        |
|     请求方式     |                             GET                              |
| 传入 api 的参数  | String id 用户的openId，int status 订单状态，int pageIndex 分页的页号，int pageSize 分页的size |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

###10.根据用户的openid分页查询全部订单信息

|       URI        |                      /order/list_status                      |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |             根据用户的openid分页查询全部订单信息             |
|     请求方式     |                             GET                              |
| 传入 api 的参数  | String id 用户的openID，int pageIndex 分页的页号，int pageSize 分页的size |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

### 11.根据名称模糊查询

|       URI        |                        /order/search                         |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |                       根据名称模糊查询                       |
|     请求方式     |                             GET                              |
| 传入 api 的参数  | String title 查询关键词，int pageIndex 分页的页号，int pageSize 分页的size |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |





## 评价管理：

### 1.添加评价

|       URI        |              /appraise/create              |
| :--------------: | :----------------------------------------: |
|     作用描述     |    在某个已经完成订单上添加新的评价数据    |
|     请求方式     |                    POST                    |
| 传入 api 的参数  | Integer oid 订单id，Appraise appraise 评价 |
|   返回数据格式   |                    Json                    |
| 返回数据格式样例 |                                            |

### 2.删除评价

|       URI        |      /appraise/{aid}/delete      |
| :--------------: | :------------------------------: |
|     作用描述     | 删除某个订单数据上已经存在的评价 |
|     请求方式     |              DELETE              |
| 传入 api 的参数  |        Integer aid 评价id        |
|   返回数据格式   |               Json               |
| 返回数据格式样例 |                                  |

### 3.查询某个评价

|       URI        |  /appraises/{aid}/get  |
| :--------------: | :--------------------: |
|     作用描述     | 根据id获得对应评价数据 |
|     请求方式     |          GET           |
| 传入 api 的参数  |   Integer aid 评价id   |
|   返回数据格式   |          Json          |
| 返回数据格式样例 |                        |

### 4.查询某订单的所有评价

|       URI        |               /appraises/{oid}               |
| :--------------: | :------------------------------------------: |
|     作用描述     | 查看某订单数据时应该获得该订单的所有评价数据 |
|     请求方式     |                     GET                      |
| 传入 api 的参数  |              Integer oid 订单id              |
|   返回数据格式   |                     Json                     |
| 返回数据格式样例 |                                              |



## 通知管理：

### 1.1获取全部消息通知

|       URI        | /notification/{openid}/getnotification |
| :--------------: | :------------------------------------: |
|     作用描述     |     根据被通知的id获得所有通知数据     |
|     请求方式     |                  GET                   |
| 传入 api 的参数  |     url上的String openid被通知的id     |
|   返回数据格式   |                  Json                  |
| 返回数据格式样例 |                                        |

### 1.2获取某用户的全部系统通知

|       URI        | /notification/{openid}/getsystemnotification |
| :--------------: | :------------------------------------------: |
|     作用描述     |    根据被通知的id获取某用户的全部系统通知    |
|     请求方式     |                     GET                      |
| 传入 api 的参数  |        url上的String openid被通知的id        |
|   返回数据格式   |                     Json                     |
| 返回数据格式样例 |                                              |

### 2.获取一条消息通知

|       URI        |   /notification/{openid}/getnotification/{notificationid}    |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |            根据被通知的id和通知id获得对应通知数据            |
|     请求方式     |                             GET                              |
| 传入 api 的参数  | url上的String openid被通知的id，url上的int notificationid通知数据id |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

###3.删除通知

|       URI        |  /notification/{openid}/deletenotification/{notificationid}  |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |                  根据通知id删除对应通知数据                  |
|     请求方式     |                            DELETE                            |
| 传入 api 的参数  | url上的 String openid （被通知的id），url上的String notificationid （通知数据的id） |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |

### 4.发送通知

|       URI        |    /notification/{fromopenid}/postnotification/toopenid/     |
| :--------------: | :----------------------------------------------------------: |
|     作用描述     |                         新增通知数据                         |
|     请求方式     |                             POST                             |
| 传入 api 的参数  | url上的String fromopenid(通知的id)和String toopenid（被通知的id）。String title 消息头，String msg 消息内容 |
|   返回数据格式   |                             Json                             |
| 返回数据格式样例 |                                                              |





## 用户反馈

|       URI        |               /feedback/               |
| :--------------: | :------------------------------------: |
|     作用描述     | 搞笑的用户反馈，参考王者荣耀的举报机制 |
|     请求方式     |                  GET                   |
| 传入 api 的参数  |                   无                   |
|   返回数据格式   |                  Json                  |
| 返回数据格式样例 |                                        |



## 积分管理

###1.获取用户最后一次积分变动

|       URI        | /reward/{openid}/getlast |
| :--------------: | :----------------------: |
|     作用描述     | 获取用户最后一次积分变动 |
|     请求方式     |           GET            |
| 传入 api 的参数  |   String openid 用户id   |
|   返回数据格式   |           JSON           |
| 返回数据格式样例 |                          |

###2.获取用户积分明细

|       URI        | /reward/{openid}/getdetails |
| :--------------: | :-------------------------: |
|     作用描述     |      获取用户积分明细       |
|     请求方式     |             GET             |
| 传入 api 的参数  |    String openid 用户id     |
|   返回数据格式   |            JSON             |
| 返回数据格式样例 |                             |

### 3.积分变动

|       URI        |       /reward/change       |
| :--------------: | :------------------------: |
|     作用描述     |          积分变动          |
|     请求方式     |            POST            |
| 传入 api 的参数  | Reward reward 积分数据对象 |
|   返回数据格式   |            JSON            |
| 返回数据格式样例 |                            |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |

|       URI        |      |
| :--------------: | :--: |
|     作用描述     |      |
|     请求方式     |      |
| 传入 api 的参数  |      |
|   返回数据格式   |      |
| 返回数据格式样例 |      |